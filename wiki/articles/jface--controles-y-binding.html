<!DOCTYPE html>
<!--[if IE 9]>
<html class="lt-ie10" lang="en" prefix="og: http://ogp.me/ns#"> <![endif]-->
<html class="no-js" lang="en" prefix="og: http://ogp.me/ns#">
<head>
    <meta charset="utf-8"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    


  <title>Jface  controles y binding</title>
  <meta property="og:title" content="Jface  controles y binding" />






<link rel="canonical" href="uqbar-project.github.io/wiki/articles/jface--controles-y-binding.html" />
<meta property="og:url" content="uqbar-project.github.io/wiki/articles/jface--controles-y-binding.html" />
<meta property="og:site_name" content="uqbar-wiki" />
<meta name="application-name" content="uqbar-wiki"/>

<meta property="og:updated_time" content=" 2017-02-09T11:53:29-03:00" />






  <meta property="keywords" content="" />











    <link rel="shortcut icon" type="image/x-icon" href="/wiki/favicon.ico" >
    <link type="text/plain" rel="author" href="/wiki/humans.txt"/>

    <link rel="stylesheet" href="/wiki/assets/app-ce8dd519ee762abf28c16f11faacee90.css">
    <style>
        .navbar {
            -webkit-backface-visibility: hidden;
        }
    </style>
</head>

<body>

<nav class="top-bar" data-topbar>
    <ul class="title-area">
        <li class="name">
            <div id="pagetitle"><a href="/wiki/">uqbar-wiki</a></div>
        </li>
        <!-- Remove the class "menu-icon" to get rid of menu icon. Take out "Menu" to just have icon alone -->
        <li class="toggle-topbar menu-icon"><a href="#"><span>Menu</span></a></li>
    </ul>

    <div class="top-bar-section">
        <!-- Right Nav Section -->
        <ul class="right">
            <li class="has-dropdown">
                <a href="#">Help</a>
                <ul class="dropdown">
                    <li><a class="link article_link" href="/wiki/wiki/articles/Frequently-Asked-Questions.html">Frequently Asked Questions</a></li>
                    <li><a class="link article_link" href="/wiki/wiki/articles/como-empezar.html">como-empezar</a></li>
                </ul>
            </li>
        </ul>

        <!-- Left Nav Section -->
        <ul class="left">
            <li class="has-dropdown">
                <a href="#">Navigation</a>
                <ul class="dropdown">
                    <li><a class="link article_link" href="/wiki/wiki/articles/paradigma-de-programacion.html">paradigma de programacion</a></li>
                    <li><a class="link article_link" href="/wiki/wiki/articles/design-temario.html">design temario</a></li>
                    <li><a class="link article_link" href="/wiki/wiki/articles/tecnicas-avanzadas-de-programacion.html">tecnicas avanzadas de programacion</a></li>
                    <li><a class="link article_link" href="/wiki/wiki/articles/programacion-de-interfaces-de-usuario.html">programacion de interfaces de usuario</a></li>
                    <li><a class="link article_link" href="/wiki/wiki/articles/algo3-temario.html">algo3 temario</a></li>
                    <li><a class="link article_link" href="/wiki/wiki/articles/programacion-con-herramientas-modernas.html">programacion con herramientas modernas</a></li>
                </ul>
            </li>
        </ul>
    </div>

</nav>

<div class="column small-0 medium-2 large-2 sidebar" style="margin-top: 10px;">
    <div class="rows">
        <img src="/wiki/img/uqbar_logo.png">
    </div>

    <ul class="rows small-12 medium-10 large-10 side-nav stack button-group" title="Link List" role="menu">
        <li class="button" role="menuitem"><a href="/wiki/">Home</a></li>
        <li class="button" role="menuitem"><a href="/wiki/articles">Lista de articulos</a></li>
    </ul>
</div>

<div class="column small-12 medium-10 large-10">
    <div id="article_title">
    <h1>
        Jface  controles y binding
    </h1>
</div>

<div id="article_content">
    <p><strong>Nota:</strong> el objetivo de esta página es comentar cómo se produce el binding entre controles de SWT/JFace y atributos de dominio. Si desea documentación para programar interfaces de usuario puede consultar <a href="http://www.eclipse.org/swt/">la página oficial de SWT</a> y <a href="http://wiki.eclipse.org/index.php/JFace">el wiki de JFace</a></p>

<p><strong>Nota 2:</strong> si ud. está cursando alguna materia de programación de interfaces de usuario, la clase <code class="highlighter-rouge">ar.com.tadp.examples.jface.base.AbstractPanel</code><T> provista por la cátedra le facilitará todas estas tareas.</T></p>

<h2 id="cómo-se-implementa-el-binding-en-jface">Cómo se implementa el binding en JFace</h2>

<p>A través de la clase DataBindingContext que conoce a ambos observers: los interesados en los cambios del modelo (BeansObservables) pero también al modelo le interesa los cambios que hace el usuario a través de la vista (SWTObservables).</p>

<p><em>Ejemplo:</em> si queremos tener binding bidireccional entre el atributo nombre de un Socio y el control textbox de la pantalla de actualización de un socio</p>

<ul>
  <li>Al generarse la pantalla debemos bindear la propiedad “nombre” del objeto socio con el control textbox de la pantalla de actualización</li>
  <li>Si se modifica el valor del atributo nombre de un socio (por afuera de la UI), debemos disparar la notificación al textbox. Esto se hace en el setter de nombre, enviando el mensaje firePropertyChange.</li>
  <li>Si el usuario escribe algo en el textbox, eso dispara automáticamente la actualización del modelo. Ejemplo: en el textbox del nombre escribimos “TARCISO”, entonces se disparará el mensaje setNombre(“TARCISO”) al objeto Socio. El setNombre a su vez disparará un firePropertyChange, pero la lógica de notificación es inteligente y sabe cortar aquí el flujo de avisos para no entrar en loop.</li>
</ul>

<h2 id="control-textbox">Control Textbox</h2>

<p>En SWT el textbox está representado por la clase <code class="highlighter-rouge">org.eclipse.swt.widgets.Text</code></p>

<p>Podemos bindear la propiedad text de un control textbox contra un atributo String de un modelo de la siguiente manera</p>

<p><code></code></p>

<p><code class="highlighter-rouge">new DataBindingContext().bindValue(</code>
<code class="highlighter-rouge">    SWTObservables.observeText(controlTextBoxEnCuestion, SWT.FocusOut), </code>
<code class="highlighter-rouge">    BeansObservables.observeValue(objetoModelo, propiedadDelModeloContraElQueSeBindea), </code>
<code class="highlighter-rouge">    null, </code>
<code class="highlighter-rouge">    null);</code></p>

<p>&lt;/code&gt; donde controlTextBoxEnCuestion es de tipo Text, objetoModelo es cualquier Object y propiedadDelModeloContraElQueSeBindea es un String.</p>

<p>Otras propiedades que admiten binding bidireccional:</p>

<ul>
  <li><strong>Editable</strong>: un valor booleano que permite habilitar/deshabilitar el input desde el teclado</li>
  <li><strong>Visible</strong>: el control puede hacerse visible o invisible en base al binding con un atributo de tipo boolean del modelo</li>
  <li><strong>Font/Foreground/Background</strong>: se puede modificar la letra con la que se visualizan los datos cargados en el control, el color de la letra o bien el de fondo, en base a un atributo de un modelo.</li>
</ul>

<p><em>Ejemplo:</em> queremos permitir cambiar el nombre a un socio solamente si está activo. El socio define como interfaz setNombre/getNombre y un isActivo(), no importa cómo se implementa. Entonces para bindear la propiedad Editable del textbox que ingresa el nombre (llamado textNombre) debemos escribir lo siguiente:</p>

<p><code></code></p>

<p><code class="highlighter-rouge">new DataBindingContext().bindValue(</code>
<code class="highlighter-rouge">    SWTObservables.observeEditable(textNombre), </code>
<code class="highlighter-rouge">    BeansObservables.observeValue(socio, "activo"), </code>
<code class="highlighter-rouge">    null, </code>
<code class="highlighter-rouge">    null);</code></p>

<p>&lt;/code&gt;</p>

<p>Nótese que no necesariamente la “propiedad” del modelo tiene que ser un atributo (variable de instancia) del objeto modelo. En nuestro caso el estar activo podría no ser un getter booleano sino un atributo calculado dinámicamente. Lo que hace JFace es recuperar el valor del método getActivo() o isActivo() para el objeto socio (a través de Reflection) y asociarlo a la propiedad editable del control (lo que devuelva el método getActivo() debe ser un booleano).</p>

<p>Mirando la clase SWTObservables podemos ver todas las propiedades que el framework en cuestión nos permite vincular.</p>

<p>Las siguientes propiedades no tienen binding bidireccional con un atributo del modelo. No obstante, podemos modificar sus valores al cargar el formulario o ante cualquier otro evento que el usuario o la pantalla dispare:</p>

<ul>
  <li>width: el tamaño del control</li>
  <li>size: la cantidad de caracteres que permite cargar</li>
</ul>

<h2 id="control-checkbox">Control Checkbox</h2>

<p>En SWT el checkbox está representado por la clase <code class="highlighter-rouge">org.eclipse.swt.widgets.Button</code> pasándole el parámetro SWT.CHECK al constructor.</p>

<p>Se puede bindear la propiedad SELECTION contra un atributo boolean de un modelo:</p>

<p><code></code></p>

<p><code class="highlighter-rouge">new DataBindingContext().bindValue(</code>
<code class="highlighter-rouge">    SWTObservables.observeSelection(controlCheckBoxEnCuestion), </code>
<code class="highlighter-rouge">    BeansObservables.observeValue(objetoModelo, atributoBooleanDelModeloContraElQueSeBindea), </code>
<code class="highlighter-rouge">    null, </code>
<code class="highlighter-rouge">    null);</code></p>

<p>&lt;/code&gt;</p>

<p>También se puede bindear las propiedades visible, font, foreground y background, entre otras. No tiene sentido bindear la propiedad text, hacerlo resulta en error.</p>

<h2 id="control-combo">Control Combo</h2>

<p>En SWT el combo está representado por la clase <code class="highlighter-rouge">org.eclipse.swt.widgets.Combo</code></p>

<p>Se agregan elementos al combo:</p>

<ul>
  <li>enviando el mensaje <code class="highlighter-rouge">add(String</code> <code class="highlighter-rouge">string)</code> o <code class="highlighter-rouge">add(String</code> <code class="highlighter-rouge">string,</code> <code class="highlighter-rouge">int</code> <code class="highlighter-rouge">index)</code> o <code class="highlighter-rouge">setItem(int</code> <code class="highlighter-rouge">index,</code> <code class="highlighter-rouge">String</code> <code class="highlighter-rouge">string)</code></li>
  <li>enviando el mensaje <code class="highlighter-rouge">setItems(String[]</code> <code class="highlighter-rouge">items)</code></li>
</ul>

<p>Como se desprende de la interfaz de cada uno de los métodos</p>

<ul>
  <li>no podemos agregar cualquier objeto, tienen que ser strings, esto nos fuerza a 1) tener en paralelo una lista de elementos “posta” relacionados o 2) recuperar con ese string el elemento (el string debe identificar de manera unívoca a ese elemento). <em>Ejemplo:</em> si el combo muestra socios de un videoclub, debemos mostrar por un lado el nombre del socio pero por otra parte tenemos que encontrar el objeto socio “posta” en base al nombre. De la misma manera ocurriría con los géneros de una película, o con los libros de una biblioteca, etc.</li>
  <li>los elementos se guardan en un orden, por eso existen métodos que agregan a partir de una posición</li>
</ul>

<p>Para conocer cuál es el elemento seleccionado del combo enviamos el mensaje getSelectionIndex(), que devuelve un int. Vemos el javadoc:</p>

<p>public int <strong>getSelectionIndex()</strong> <em>Returns the zero-relative index of the item which is currently selected in the receiver’s list, or -1 if no item is selected.</em></p>

<p>Tener el selectionIndex como un entero refuerza la idea de que el orden en el combo es importante, si tengo los elementos en un Set no me serviría el selectionIndex.</p>

<p>El binding relaciona un String con la propiedad selection del combo cuando el usuario modifica el elemento elegido.</p>

<p><em>Ejemplo:</em> queremos definir un combo cuyos elementos son la lista de socios de un videoclub. El código es el siguiente <code></code></p>

<p><code class="highlighter-rouge">Combo comboSocios = new Combo(formulario, SWT.LEFT | SWT.BORDER | SWT.SINGLE);</code>
<code class="highlighter-rouge">comboSocios.setLayoutData(new GridData(150, SWT.DEFAULT));</code>
<code class="highlighter-rouge">for (Socio socio : this.getSocios()) {</code>
<code class="highlighter-rouge">    comboSocios.add(socio.getNombreCompleto());</code>
<code class="highlighter-rouge">}</code>
<code class="highlighter-rouge">new DataBindingContext().bindValue(SWTObservables.observeSelection(comboSocios), </code>
<code class="highlighter-rouge">                                   BeansObservables.observeValue(EditarSocioModel, socioSeleccionado), </code>
<code class="highlighter-rouge">                                   null, </code>
<code class="highlighter-rouge">                                   null);</code></p>

<p>&lt;/code&gt;</p>

<p>El binding no lo podemos hacer contra un socio en particular, necesitamos trabajar con un model que tenga comportamiento adicional. El EditarSocioModel define el método setSocioSeleccionado de la siguiente manera:</p>

<p><code></code></p>

<p><code class="highlighter-rouge">public void setSocioSeleccionado(String nombreCompletoSocio) {</code>
<code class="highlighter-rouge">    ...</code>
<code class="highlighter-rouge">}</code></p>

<p>&lt;/code&gt; Aquí entonces hay que convertir el nombre del socio (un String) al objeto Socio en cuestión si queremos enviarle algún mensaje.</p>

<h2 id="control-grilla">Control Grilla</h2>

<p>En SWT la grilla se representa con la clase <code class="highlighter-rouge">org.eclipse.swt.widgets.Table</code></p>

<p>FALTA: desarrollar ejemplo</p>

<h2 id="control-botón">Control Botón</h2>

<p>En SWT la grilla se representa con la clase <code class="highlighter-rouge">org.eclipse.swt.widgets.Button</code> pasándole el parámetro SWT.PUSH al constructor.</p>

<p>El botón tiene listeners, cuando el usuario presiona el botón se dispara la notificación del botón apretado a cada listener. Nosotros escribimos el código no en el botón, sino en el listener.</p>

<p><em>Ejemplo:</em></p>

<p><code></code></p>

<p><code class="highlighter-rouge">Button botonAceptar = new Button(formulario, SWT.PUSH);</code>
<code class="highlighter-rouge">botonAceptar.setText("Aceptar");</code>
<code class="highlighter-rouge">botonAceptar.addSelectionListener(</code>
<code class="highlighter-rouge">    new SelectionListener() {</code>
<code class="highlighter-rouge">        @Override</code>
<code class="highlighter-rouge">        public void widgetSelected(SelectionEvent e) {</code>
<code class="highlighter-rouge">            ... &lt;-- ACA ESCRIBIMOS EL CODIGO DEL BOTON --&gt;</code>
<code class="highlighter-rouge">        }</code>
<code class="highlighter-rouge">        @Override</code>
<code class="highlighter-rouge">        public void widgetDefaultSelected(SelectionEvent e) {</code>
<code class="highlighter-rouge">            this.widgetSelected(e);</code>
<code class="highlighter-rouge">        }</code>
<code class="highlighter-rouge">       </code>
<code class="highlighter-rouge">    );</code></p>

<p>&lt;/code&gt;</p>

<p>Las propiedades más interesantes de bindear son enabled (si el botón está habilitado) y visible (si está visible).</p>

<h2 id="campos-calculados">Campos calculados</h2>

<p>Podemos subclasificar la clase <strong>ComputedValue</strong> para vincular cualquier expresión que deseemos: sólo tenemos que redefinir el método <code class="highlighter-rouge">protected</code> <code class="highlighter-rouge">Object</code> <code class="highlighter-rouge">calculate</code>.</p>

<p>Pueden verse los siguientes ejemplos <a href="http://wiki.eclipse.org/JFace_Data_Binding/Snippets">&gt; ver ComputedValue</a></p>

<h2 id="links-relacionados">Links relacionados</h2>

<ul>
  <li><a href="formas-de-vincular-una-vista-con-el-modelo-de-dominio.html">Formas de vincular una vista con el modelo de dominio</a></li>
  <li><a href="ejemplos-de-binding-entre-vista-y-modelo.html">Ejemplos de Binding entre vista y modelo</a></li>
  <li><a href="algo3-temario.html">Algo3 Temario</a></li>
</ul>


</div>

<div id="article_metadata">
    <p>Latest update on February 02, 2017 by
        Ernesto Bossi</p>

    <ul class="accordion" data-accordion>
        <li class="accordion-navigation">
            <a href="#panel1a">Page History, Meta information</a>

            <div id="panel1a" class="content">

                <div class="rows">
                    <div class="column small-12 medium-6 large-6">
                        <table>
                            <thead>
                            <tr>
                                <th>Page Commits</th>
                                <th>Page Additions</th>
                                <th>Page Deletions</th>
                            </tr>
                            </thead>

                            <tbody>
                            <tr>
                                <td>2</td>
                                <td>181</td>
                                <td>0</td>
                            </tr>
                            </tbody>
                        </table>
                    </div>

                    <div class="column small-12 medium-6 large-6">
                        <table>
                            <thead>
                            <tr>
                                <th>Name</th>
                                <th>Email</th>
                                <th>Commits</th>
                            <tr>
                            </thead>

                            <tbody>
                            
                            <tr>
                                <td>Ernesto Bossi</td>
                                <td>bossi.e...</td>
                                <td>1</td>
                            </tr>
                            
                            <tr>
                                <td>Npasserini</td>
                                <td>Npasser...</td>
                                <td>1</td>
                            </tr>
                            
                            </tbody>
                        </table>
                    </div>
                </div>

                <table style="margin-left: 15px;">
                    <thead>
                    <tr>
                        <th>Hash</th>
                        <th>Time</th>
                        <th>Name</th>
                        <th>Mail</th>
                        <th>Subject</th>
                    <tr>
                    </thead>

                    <tbody>
                    
                    <tr>
                        <td>bef5aba</td>
                        <td>Thu Feb 2 19:24:04 2017 -0300</td>
                        <td>Ernesto Bossi</td>
                        <td>bossi.e...</td>
                        <td>build up initial migration with old commits</td>
                    </tr>
                    
                    <tr>
                        <td>299a477</td>
                        <td>Thu Feb 2 19:14:20 2017 -0300</td>
                        <td>Ernesto Bossi</td>
                        <td>bossi.e...</td>
                        <td>/* ¿Por qué entonces dice unexpected `;', si yo no puse ningún ";"? */</td>
                    </tr>
                    
                    </tbody>
                </table>

            </div>
        </li>
    </ul>

</div>


</div>


<div id="footer">
    <div class="columns small-1 medium-2 large-3">
        <small>(C) 2015-17 Matthias Beyer/Ernesto Bossi</small>
    </div>

    <div class="columns small-11 medium-10 large-9">
    </div>

</div>

<script>
    'use strict';
</script>

<script src="/wiki/assets/jquery-9954088f87089c387789507249fa70d3.js"></script>
<script src="/wiki/assets/jquery.min-650c8b3af3d010ec559014c6e70b13c3.js"></script>
<script src="https://code.jquery.com/ui/1.11.4/jquery-ui.min.js" type="text/javascript"></script>

<script src="/wiki/assets/foundation/foundation-8e0f071884576348dba555b27a4bcaa9.js"></script>
<script src="/wiki/assets/foundation/foundation.abide-fa5ce9fbf8301ae49154ebc752edc220.js"></script>
<script src="/wiki/assets/foundation/foundation.accordion-bcc423fb0c2a3d515ba85ff591171a8e.js"></script>
<script src="/wiki/assets/foundation/foundation.alert-609b779b55610f4916250faaa37d1cfc.js"></script>
<script src="/wiki/assets/foundation/foundation.clearing-167db0285c7a789f7f216183f9038ac4.js"></script>
<script src="/wiki/assets/foundation/foundation.dropdown-25aac997ca0ca5dc3c3094c266c8f5aa.js"></script>
<script src="/wiki/assets/foundation/foundation.equalizer-cbdd8079a6f777c37dd1314f9b17faec.js"></script>
<script src="/wiki/assets/foundation/foundation.interchange-6ef75863aff8abeff4de79554b62e1b9.js"></script>
<script src="/wiki/assets/foundation/foundation.joyride-7cce0075f55d456449419a92671a3874.js"></script>
<script src="/wiki/assets/foundation/foundation.magellan-dc0647982e238cf1db3113e50d1b85dd.js"></script>
<script src="/wiki/assets/foundation/foundation.offcanvas-61dc0fe57ed932800c4a09b92c1ba4e5.js"></script>
<script src="/wiki/assets/foundation/foundation.orbit-9698da4fd068f7b83b3e5c00aae63ab3.js"></script>
<script src="/wiki/assets/foundation/foundation.reveal-4944447a204c398659229cfd716786a1.js"></script>
<script src="/wiki/assets/foundation/foundation.slider-7ea4b29f663e7e1b52ddc9f7ca0458b3.js"></script>
<script src="/wiki/assets/foundation/foundation.tab-c2efa8f5f8b255b06db277c3f339a0c7.js"></script>
<script src="/wiki/assets/foundation/foundation.tooltip-4a5d212b8f811ff50bba6cc61a2b899a.js"></script>
<script src="/wiki/assets/foundation/foundation.topbar-4dd840d30430ff2146208830574ca615.js"></script>

<script src="/wiki/assets/jquery.cookie-61d99d4505fb2f5359bf351153c83f1d.js"></script>
<!-- Script pointing to jekyll-search.js -->
<script src="/wiki/assets/jekyll-search-2c27791d765f338cd196c9aa9a050936.js"></script>

<script>
    SimpleJekyllSearch({
        searchInput: document.getElementById('search-input'),
        resultsContainer: document.getElementById('results-container'),
        json: "/wiki/search.json"
    });

    $(document).foundation();

</script>

<!-- prism.js -->
<script src="/wiki/assets/prism-1eea551ba45e704ef55167430bb80ce4.js"></script>
</body>
</html>
